<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>ReviveMC - Accueil</title>
  <meta name="description" content="Circuit partenaires ReviveMC - cumule des points officiels et qualifie-toi pour la grande finale BedWars.">
  <link rel="stylesheet" href="style.css">
  <script src="data.js"></script>
</head>
<body>
  <header>
    <div class="logo">ReviveMC</div>
    <nav>
      <a href="index.html" class="active">Accueil</a>
      <a href="calendrier.html">Calendrier</a>
      <a href="classement.html">Classement</a>
      <a href="#inscrire">Inscrire son tournoi</a>
    </nav>
    <button id="toggleTheme">üåô</button>
  </header>
  <main class="container">
    <section class="hero">
      <h1>ReviveMC ‚Äî Circuit Partenaires</h1>
      <p>Cumule des points officiels sur des tournois partenaires. Les <strong>8 meilleurs</strong> vont en <strong>Finale BedWars</strong>.</p>
      <p>
        <a href="calendrier.html" class="btn">Voir le calendrier</a>
        <a href="classement.html" class="btn">Voir le classement</a>
      </p>
    </section>

    <section class="card">
      <h2>Finale BedWars (Top 8)</h2>
      <p>Format 4v4 BedWars avec les 8 meilleurs joueurs du classement officiel. Phase de poules ‚Üí demi-finales ‚Üí grande finale.</p>
    </section>

    <section id="nextTournament" class="card">
      <h2>Prochain tournoi</h2>
      <div id="tournamentCard"></div>
      <div id="countdown"></div>
    </section>

    <section id="inscrire" class="card">
      <h2>Comment inscrire son tournoi</h2>
      <ol>
        <li>Contacter <strong>@Jojo</strong> sur Discord</li>
        <li>Rejoindre le <a href="#">Discord ReviveMC</a></li>
        <li>Pr√©parer : r√®gles, format, date/heure, capacit√©, bar√®me propos√©</li>
        <li>Attendre validation ‚ÄúPartenaire ReviveMC‚Äù + ajout au calendrier</li>
      </ol>
      <p><strong>FAQ rapide :</strong> validation sous 1 semaine, branding ReviveMC obligatoire.</p>
    </section>
  </main>
  <footer>
    <span id="lastUpdate"></span>
  </footer>

  <script>
    function formatDateFR(dateStr){
      return new Intl.DateTimeFormat('fr-FR',{dateStyle:'full',timeStyle:'short'}).format(new Date(dateStr));
    }
    function getNextTournament(data){
      const now=new Date();
      return data.tournaments.filter(t=>new Date(t.date)>now).sort((a,b)=>new Date(a.date)-new Date(b.date))[0];
    }
    function renderNextTournamentCard(){
      const t=getNextTournament(window.REVIVE_DATA);
      if(!t)return;
      document.getElementById('tournamentCard').innerHTML=`
        <p><strong>${t.name}</strong> ‚Äî ${t.partner}</p>
        <p>${formatDateFR(t.date)} ‚Ä¢ ${t.format} ${t.mode}</p>
        <p>Status: ${t.status}</p>
      `;
      const target=new Date(t.date).getTime();
      const el=document.getElementById('countdown');
      setInterval(()=>{
        const diff=target-Date.now();
        if(diff<=0){el.textContent="En cours ou termin√©";return;}
        const d=Math.floor(diff/86400000),
              h=Math.floor((diff%86400000)/3600000),
              m=Math.floor((diff%3600000)/60000),
              s=Math.floor((diff%60000)/1000);
        el.textContent=`${d}j ${h}h ${m}m ${s}s`;
      },1000);
    }
    document.getElementById('lastUpdate').textContent="Derni√®re mise √† jour : "+formatDateFR(window.REVIVE_DATA.updatedAt);
    renderNextTournamentCard();

    const toggleBtn=document.getElementById('toggleTheme');
    function setTheme(mode){document.documentElement.classList.toggle('light',mode==='light');localStorage.setItem('theme',mode);}
    toggleBtn.onclick=()=>{const mode=document.documentElement.classList.contains('light')?'dark':'light';setTheme(mode);};
    if(localStorage.getItem('theme')==='light')setTheme('light');
  </script>
</body>
</html>
